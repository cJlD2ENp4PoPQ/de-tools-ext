!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VanillaContext=e():t.VanillaContext=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t,e,n,i){t.addEventListener(e,n,i),this.listeners.push({element:t,type:e,listener:n})},t.prototype.destroy=function(){this.listeners.forEach((function(t){var e=t.element,n=t.type,i=t.listener;e.removeEventListener(n,i)}))},t}();e.VEventContainer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),s=function(){function t(t){this.ul=document.createElement("ul"),this.children=[],this.params=t,this.setChildren(),this.ul.className="vanilla-context-ul",this.parseGroupClass()}return t.prototype.onAttached=function(){},t.prototype.getElement=function(){return this.ul},t.prototype.setChildren=function(){var t=this;this.params.nodes.forEach((function(e,n){var s={context:t.params.context,e:t.params.e,index:n,parent:t,node:e},o=new i.VLIElement(s);t.getElement().appendChild(o.getElement()),setTimeout(o.onAttached.bind(o),0),t.children.push(o)}))},t.prototype.show=function(){this.ul.classList.add("active")},t.prototype.hide=function(){this.ul.classList.remove("active")},t.prototype.select=function(t){this.children.forEach((function(e){return t===e?t.openChild():e.closeChild()}))},t.prototype.setLocation=function(t){this.ul.style.top=t.y+"px",this.ul.style.left=t.x+"px"},t.prototype.onDestroy=function(){var t;null===(t=this.ul.parentElement)||void 0===t||t.removeChild(this.ul),this.children.forEach((function(t){t.onDestroy()}))},t.prototype.parseGroupClass=function(){var t=this.params.context.options.groupClasses;if(t)if("function"==typeof t){var e=t({api:this.params.context,originEvent:this.params.e});this.ul.className=this.ul.className+" "+e}else this.ul.className=this.ul.className+" "+t},t}();e.VUListElement=s},function(t,e,n){"use strict";n(3);var i=n(4);t.exports=i.VanillaContext},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(1),o={autoClose:!0,debug:!0,nodes:[]},r=function(){function t(t,e){this.element=t,this.options=Object.assign(o,e),this.events=new i.VEventContainer,this.setEvents()}return t.prototype.setEvents=function(){this.events.addEventListener(this.element,"contextmenu",this.onContextRequested.bind(this)),this.events.addEventListener(document,"click",this.onWindowClicked.bind(this))},t.prototype.onContextRequested=function(e){var n=this;if(e.preventDefault(),!this.context||!this.context.ul.contains(e.target)){this.context&&this.context.onDestroy(),this.context=new s.VUListElement({context:this,e:e,nodes:"function"==typeof n.options.nodes?n.options.nodes({api:n,originEvent:e}):n.options.nodes}),this.element.appendChild(this.context.getElement());var i=t.getMousePosition(e),o=i.x,r=i.y;this.context.show(),this.context.setLocation({x:o,y:r})}},t.prototype.onWindowClicked=function(t){this.context&&!this.context.ul.contains(t.target)&&this.context.onDestroy()},t.prototype.close=function(){this.context&&this.context.onDestroy()},t.getMousePosition=function(t){var e=t,n=0,i=0;return e.pageX||e.pageY?(n=e.pageX,i=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:i}},t}();e.VanillaContext=r,e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),s=n(1),o=n(6),r=function(){function t(t){this.li=document.createElement("li"),this.events=new i.VEventContainer,this.li.className="vanilla-context-li",this.params=t,this.parseRenderer()}return t.prototype.onAttached=function(){this.parseItemClass(),this.parseItemStyle(),this.parseNodeClass(),this.parseNodeStyle(),this.parseNodeDisabled(),this.setChild(),this.setEvent()},t.prototype.setChild=function(){this.params.node.children&&(this.child=new s.VUListElement({context:this.params.context,e:this.params.e,parent:this,nodes:this.params.node.children}),this.li.appendChild(this.child.getElement()))},t.prototype.getElement=function(){return this.li},t.prototype.parseRenderer=function(){var t=this.params.node.renderer;if(o.isClassRenderer(t))this.renderer=new t,this.renderer.init({api:this.params.context,originEvent:this.params.e});else if(o.isFunctionRenderer(t)){var e=t({api:this.params.context,originEvent:this.params.e});if(e instanceof Node)this.li.appendChild(e);else{if("string"!=typeof e)throw new Error("Unsupported renderer type, you have to return Node or String");this.li.innerHTML=e}}else{if(!o.isStringRenderer(t))throw new Error("Unsupported renderer type");this.li.innerHTML=t}if(this.params.node.children){var n=document.createElement("div");n.classList.add("vanilla-context-icon"),this.li.appendChild(n)}},t.prototype.setEvent=function(){this.events.addEventListener(this.li,"click",this.onClick.bind(this)),this.events.addEventListener(this.li,"mouseover",this.onMouseOver.bind(this)),this.events.addEventListener(this.li,"mouseout",this.onMouseOut.bind(this))},t.prototype.onClick=function(t){t.target===this.li&&this.params.node.onClick&&(this.params.node.onClick({api:this.params.context,event:t,originEvent:this.params.e}),this.params.context.options.autoClose&&this.params.context.close())},t.prototype.onMouseOver=function(t){this.li.classList.add("hover"),this.params.parent.select(this)},t.prototype.onMouseOut=function(t){this.li.classList.remove("hover")},t.prototype.openChild=function(){var t,e,n=this.params.parent.ul.getBoundingClientRect(),i=n.left,s=n.width,o=this.li.getBoundingClientRect().top;null===(t=this.child)||void 0===t||t.show(),null===(e=this.child)||void 0===e||e.setLocation({x:i+s-1,y:o})},t.prototype.closeChild=function(){var t;null===(t=this.child)||void 0===t||t.hide()},t.prototype.onDestroy=function(){var t,e;null===(t=this.renderer)||void 0===t||t.destroy(),null===(e=this.li.parentElement)||void 0===e||e.removeChild(this.li)},t.prototype.parseItemClass=function(){var t=this.params.context.options.itemClasses;if(t)if("function"==typeof t){var e=t({api:this.params.context,originEvent:this.params.e});this.li.className=this.li.className+" "+e}else this.li.className=this.li.className+" "+t},t.prototype.parseItemStyle=function(){var t=this.params.context.options.itemStyle;if(t){var e="function"==typeof t?t({api:this.params.context,originEvent:this.params.e}):t;Object.assign(this.li.style,e)}},t.prototype.parseNodeDisabled=function(){var t=this.params.node.disabled;t&&("boolean"==typeof t||"function"==typeof t&&t({api:this.params.context,originEvent:this.params.e}))&&this.li.classList.add("disabled")},t.prototype.parseNodeStyle=function(){var t=this.params.node.style;t&&("function"==typeof t?Object.assign(this.li.style,t({api:this.params.context,originEvent:this.params.e})):Object.assign(this.li.style,t))},t.prototype.parseNodeClass=function(){var t=this.params.node.classes;if(t)if("function"==typeof t){var e=t({api:this.params.context,originEvent:this.params.e});this.li.className=this.li.className+" "+e}else this.li.className=this.li.className+" "+t},t}();e.VLIElement=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunctionRenderer=function(t){return"function"==typeof t&&!("init"in t)},e.isClassRenderer=function(t){return"function"==typeof t&&"init"in t},e.isStringRenderer=function(t){return"string"==typeof t}}])}));